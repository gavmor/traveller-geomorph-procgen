import{p as vt,A as I,P as ht,y as N,_ as Ee,l as ye,D as mt,v as gt,x as Ve,L as ue,R as bt,U as _t,a as Me,b as wt,O as yt,c as Ct,S as St,d as fe,N as Pt,e as Et,J as Xe,W as Mt,C as Ot,B as jt,f as Rt,V as Tt,g as oe,h as xt,i as kt,j as Lt,k as ae,T as ce,m as ie,n as zt,o as Ye,F as Dt,q as At,r as It}from"./drei-Bchj9Fhf.js";const Bt=2,Ft=8,Ce=32,Ht=1;function Nt(e){let t;const n=new Set,s=(v,r)=>{const o=typeof v=="function"?v(t):v;if(o!==t){const l=t;t=r?o:Object.assign({},t,o),n.forEach(u=>u(t,l))}},i=()=>t,h=(v,r=i,o=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let l=r(t);function u(){const d=r(t);if(!o(l,d)){const y=l;v(l=d,y)}}return n.add(u),()=>n.delete(u)},f={setState:s,getState:i,subscribe:(v,r,o)=>r||o?h(v,r,o):(n.add(v),()=>n.delete(v)),destroy:()=>n.clear()};return t=e(s,i,f),f}const $t=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),Re=$t?N:Ee;function Ut(e){const t=typeof e=="function"?Nt(e):e,n=(s=t.getState,i=Object.is)=>{const[,h]=vt(_=>_+1,0),m=t.getState(),c=I(m),f=I(s),v=I(i),r=I(!1),o=I();o.current===void 0&&(o.current=s(m));let l,u=!1;(c.current!==m||f.current!==s||v.current!==i||r.current)&&(l=s(m),u=!i(o.current,l)),Re(()=>{u&&(o.current=l),c.current=m,f.current=s,v.current=i,r.current=!1});const d=I(m);Re(()=>{const _=()=>{try{const p=t.getState(),g=f.current(p);v.current(o.current,g)||(c.current=p,o.current=g,h())}catch{r.current=!0,h()}},a=t.subscribe(_);return t.getState()!==d.current&&_(),a},[]);const y=u?l:o.current;return ht(y),y};return Object.assign(n,t),n[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const s=[n,t];return{next(){const i=s.length<=0;return{value:s.shift(),done:i}}}},n}var Wt=0;function F(e,t,n,s,i,h){t||(t={});var m,c,f=t;if("ref"in f)for(c in f={},t)c=="ref"?m=t[c]:f[c]=t[c];var v={type:e,props:f,key:n,ref:m,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--Wt,__i:-1,__u:0,__source:i,__self:h};if(typeof e=="function"&&(m=e.defaultProps))for(c in m)f[c]===void 0&&(f[c]=m[c]);return ye.vnode&&ye.vnode(v),v}class Te extends HTMLElement{setAttribute(t,n){var s;this[t]=n;const i=this.b;if(i!=null&&i.d){const h=i.f,m=(s=this.c)!=null?s:this.c=h.c,c=h.e;if(i.props[t]=n,i.a){const f=m.prepareUpdate(i.a,i.d,i.g,i.props,c,null);f&&m.commitUpdate(i.a,f,i.d,i.g,i.props,i)}else{this.ownerSVGElement=null,delete i.props.b,i.g={...i.props},i.a=m.createInstance(i.d,i.props,c,null,i);let f=i.ref;Object.defineProperty(i,"ref",{get(){return f},set(v){f=r=>{const o=r===null?null:m.getPublicInstance(i.a);v&&"current"in v?v.current=o:v==null||v(o)}}}),i.ref=f,m.finalizeInitialChildren(i.a,i.d,i.props,c,null)&&m.commitMount(i.a,i.d,i.props,i)}i.g[t]=n}}appendChild(t){const n=t;return this.b?this.c.appendChild(this.b.a,n.b.a):this.c.appendChildToContainer(this.e,n.b.a),super.appendChild(t)}insertBefore(t,n){if(n===null)return this.appendChild(t);const s=t,i=n;return this.b?this.c.insertBefore(this.b.a,s.b.a,i.b.a):this.c.insertInContainerBefore(this.e,s.b.a,i.b.a),super.insertBefore(t,n)}removeChild(t){const n=t;return this.b?this.c.removeChild(this.b.a,n.b.a):this.c.removeChildFromContainer(this.e,n.b.a),super.removeChild(t)}}let de;const xe=ye,Gt=e=>{if(!de){customElements.define(de="preact-reconciler-0.1.7",Te);const t=xe.__b;xe.__b=n=>{var s;const i=n;if(typeof i.type=="string"&&!i.f){let h=i.__;for(;h!=null&&h.__;)h=h.__;i.f=h==null?void 0:h.__c.__P,(s=i.f)!=null&&s.c&&(i.d=i.type,i.type=de,i.props.b=i)}t==null||t(n)}}return{createContainer(t){const n=new Te;return n.e=t,n.c=e,n},updateContainer:mt,createPortal(){},injectIntoDevTools(){}}};var Je={exports:{}},Ke={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(b,S){var w=b.length;b.push(S);e:for(;0<w;){var E=w-1>>>1,L=b[E];if(0<i(L,S))b[E]=S,b[w]=L,w=E;else break e}}function n(b){return b.length===0?null:b[0]}function s(b){if(b.length===0)return null;var S=b[0],w=b.pop();if(w!==S){b[0]=w;e:for(var E=0,L=b.length,z=L>>>1;E<z;){var B=2*(E+1)-1,W=b[B],G=B+1,te=b[G];if(0>i(W,w))G<L&&0>i(te,W)?(b[E]=te,b[G]=w,E=G):(b[E]=W,b[B]=w,E=B);else if(G<L&&0>i(te,w))b[E]=te,b[G]=w,E=G;else break e}}return S}function i(b,S){var w=b.sortIndex-S.sortIndex;return w!==0?w:b.id-S.id}if(typeof performance=="object"&&typeof performance.now=="function"){var h=performance;e.unstable_now=function(){return h.now()}}else{var m=Date,c=m.now();e.unstable_now=function(){return m.now()-c}}var f=[],v=[],r=1,o=null,l=3,u=!1,d=!1,y=!1,_=typeof setTimeout=="function"?setTimeout:null,a=typeof clearTimeout=="function"?clearTimeout:null,p=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function g(b){for(var S=n(v);S!==null;){if(S.callback===null)s(v);else if(S.startTime<=b)s(v),S.sortIndex=S.expirationTime,t(f,S);else break;S=n(v)}}function P(b){if(y=!1,g(b),!d)if(n(f)!==null)d=!0,H(M);else{var S=n(v);S!==null&&U(P,S.startTime-b)}}function M(b,S){d=!1,y&&(y=!1,a(T),T=-1),u=!0;var w=l;try{for(g(S),o=n(f);o!==null&&(!(o.expirationTime>S)||b&&!C());){var E=o.callback;if(typeof E=="function"){o.callback=null,l=o.priorityLevel;var L=E(o.expirationTime<=S);S=e.unstable_now(),typeof L=="function"?o.callback=L:o===n(f)&&s(f),g(S)}else s(f);o=n(f)}if(o!==null)var z=!0;else{var B=n(v);B!==null&&U(P,B.startTime-S),z=!1}return z}finally{o=null,l=w,u=!1}}var O=!1,R=null,T=-1,k=5,j=-1;function C(){return!(e.unstable_now()-j<k)}function x(){if(R!==null){var b=e.unstable_now();j=b;var S=!0;try{S=R(!0,b)}finally{S?A():(O=!1,R=null)}}else O=!1}var A;if(typeof p=="function")A=function(){p(x)};else if(typeof MessageChannel<"u"){var $=new MessageChannel,q=$.port2;$.port1.onmessage=x,A=function(){q.postMessage(null)}}else A=function(){_(x,0)};function H(b){R=b,O||(O=!0,A())}function U(b,S){T=_(function(){b(e.unstable_now())},S)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(b){b.callback=null},e.unstable_continueExecution=function(){d||u||(d=!0,H(M))},e.unstable_forceFrameRate=function(b){0>b||125<b?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<b?Math.floor(1e3/b):5},e.unstable_getCurrentPriorityLevel=function(){return l},e.unstable_getFirstCallbackNode=function(){return n(f)},e.unstable_next=function(b){switch(l){case 1:case 2:case 3:var S=3;break;default:S=l}var w=l;l=S;try{return b()}finally{l=w}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(b,S){switch(b){case 1:case 2:case 3:case 4:case 5:break;default:b=3}var w=l;l=b;try{return S()}finally{l=w}},e.unstable_scheduleCallback=function(b,S,w){var E=e.unstable_now();switch(typeof w=="object"&&w!==null?(w=w.delay,w=typeof w=="number"&&0<w?E+w:E):w=E,b){case 1:var L=-1;break;case 2:L=250;break;case 5:L=1073741823;break;case 4:L=1e4;break;default:L=5e3}return L=w+L,b={id:r++,callback:S,priorityLevel:b,startTime:w,expirationTime:L,sortIndex:-1},w>E?(b.sortIndex=w,t(v,b),n(f)===null&&b===n(v)&&(y?(a(T),T=-1):y=!0,U(P,w-E))):(b.sortIndex=L,t(f,b),d||u||(d=!0,H(M))),b},e.unstable_shouldYield=C,e.unstable_wrapCallback=function(b){var S=l;return function(){var w=l;l=S;try{return b.apply(this,arguments)}finally{l=w}}}})(Ke);Je.exports=Ke;var ke=Je.exports;const Oe={},qt=e=>void Object.assign(Oe,e);function Vt(e,t){function n(r,{args:o=[],attach:l,...u},d){let y=`${r[0].toUpperCase()}${r.slice(1)}`,_;if(r==="primitive"){if(u.object===void 0)throw new Error("R3F: Primitives without 'object' are invalid!");const a=u.object;_=Y(a,{type:r,root:d,attach:l,primitive:!0})}else{const a=Oe[y];if(!a)throw new Error(`R3F: ${y} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(o))throw new Error("R3F: The args prop must be an array!");_=Y(new a(...o),{type:r,root:d,attach:l,memoizedProps:{args:o}})}return _.__r3f.attach===void 0&&(_.isBufferGeometry?_.__r3f.attach="geometry":_.isMaterial&&(_.__r3f.attach="material")),y!=="inject"&&he(_,u),_}function s(r,o){let l=!1;if(o){var u,d;(u=o.__r3f)!=null&&u.attach?ve(r,o,o.__r3f.attach):o.isObject3D&&r.isObject3D&&(r.add(o),l=!0),l||(d=r.__r3f)==null||d.objects.push(o),o.__r3f||Y(o,{}),o.__r3f.parent=r,Pe(o),J(o)}}function i(r,o,l){let u=!1;if(o){var d,y;if((d=o.__r3f)!=null&&d.attach)ve(r,o,o.__r3f.attach);else if(o.isObject3D&&r.isObject3D){o.parent=r,o.dispatchEvent({type:"added"}),r.dispatchEvent({type:"childadded",child:o});const _=r.children.filter(p=>p!==o),a=_.indexOf(l);r.children=[..._.slice(0,a),o,..._.slice(a)],u=!0}u||(y=r.__r3f)==null||y.objects.push(o),o.__r3f||Y(o,{}),o.__r3f.parent=r,Pe(o),J(o)}}function h(r,o,l=!1){r&&[...r].forEach(u=>m(o,u,l))}function m(r,o,l){if(o){var u,d,y;if(o.__r3f&&(o.__r3f.parent=null),(u=r.__r3f)!=null&&u.objects&&(r.__r3f.objects=r.__r3f.objects.filter(P=>P!==o)),(d=o.__r3f)!=null&&d.attach)Ie(r,o,o.__r3f.attach);else if(o.isObject3D&&r.isObject3D){var _;r.remove(o),(_=o.__r3f)!=null&&_.root&&tn(se(o),o)}const p=(y=o.__r3f)==null?void 0:y.primitive,g=!p&&(l===void 0?o.dispose!==null:l);if(!p){var a;h((a=o.__r3f)==null?void 0:a.objects,o,g),h(o.children,o,g)}if(delete o.__r3f,g&&o.dispose&&o.type!=="Scene"){const P=()=>{try{o.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT>"u"?ke.unstable_scheduleCallback(ke.unstable_IdlePriority,P):P()}J(r)}}function c(r,o,l,u){var d;const y=(d=r.__r3f)==null?void 0:d.parent;if(!y)return;const _=n(o,l,r.__r3f.root);if(r.children){for(const a of r.children)a.__r3f&&s(_,a);r.children=r.children.filter(a=>!a.__r3f)}r.__r3f.objects.forEach(a=>s(_,a)),r.__r3f.objects=[],r.__r3f.autoRemovedBeforeAppend||m(y,r),_.parent&&(_.__r3f.autoRemovedBeforeAppend=!0),s(y,_),_.raycast&&_.__r3f.eventCount&&se(_).getState().internal.interaction.push(_),[u,u.alternate].forEach(a=>{a!==null&&(a.stateNode=_,a.ref&&(typeof a.ref=="function"?a.ref(_):a.ref.current=_))})}const f=()=>{};return{reconciler:Gt({createInstance:n,removeChild:m,appendChild:s,appendInitialChild:s,insertBefore:i,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(r,o)=>{if(!o)return;const l=r.getState().scene;l.__r3f&&(l.__r3f.root=r,s(l,o))},removeChildFromContainer:(r,o)=>{o&&m(r.getState().scene,o)},insertInContainerBefore:(r,o,l)=>{if(!o||!l)return;const u=r.getState().scene;u.__r3f&&i(u,o,l)},getRootHostContext:()=>null,getChildHostContext:r=>r,finalizeInitialChildren(r){var o;return!!((o=r==null?void 0:r.__r3f)!=null?o:{}).handlers},prepareUpdate(r,o,l,u){var d;if(((d=r==null?void 0:r.__r3f)!=null?d:{}).primitive&&u.object&&u.object!==r)return[!0];{const{args:_=[],children:a,...p}=u,{args:g=[],children:P,...M}=l;if(!Array.isArray(_))throw new Error("R3F: the args prop must be an array!");if(_.some((R,T)=>R!==g[T]))return[!0];const O=ot(r,p,M,!0);return O.changes.length?[!1,O]:null}},commitUpdate(r,[o,l],u,d,y,_){o?c(r,u,y,_):he(r,l)},commitMount(r,o,l,u){var d;const y=(d=r.__r3f)!=null?d:{};r.raycast&&y.handlers&&y.eventCount&&se(r).getState().internal.interaction.push(r)},getPublicInstance:r=>r,prepareForCommit:()=>null,preparePortalMount:r=>Y(r.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(r){var o;const{attach:l,parent:u}=(o=r.__r3f)!=null?o:{};l&&u&&Ie(u,r,l),r.isObject3D&&(r.visible=!1),J(r)},unhideInstance(r,o){var l;const{attach:u,parent:d}=(l=r.__r3f)!=null?l:{};u&&d&&ve(d,r,u),(r.isObject3D&&o.visible==null||o.visible)&&(r.visible=!0),J(r)},createTextInstance:f,hideTextInstance:f,unhideTextInstance:f,getCurrentEventPriority:()=>t?t():Ce,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance<"u"&&D.fun(performance.now)?performance.now:D.fun(Date.now)?Date.now:()=>0,scheduleTimeout:D.fun(setTimeout)?setTimeout:void 0,cancelTimeout:D.fun(clearTimeout)?clearTimeout:void 0}),applyProps:he}}var Le,ze;const pe=e=>"colorSpace"in e||"outputColorSpace"in e,Qe=()=>{var e;return(e=Oe.ColorManagement)!=null?e:null},Ze=e=>e&&e.isOrthographicCamera,Xt=e=>e&&e.hasOwnProperty("current"),ee=typeof window<"u"&&((Le=window.document)!=null&&Le.createElement||((ze=window.navigator)==null?void 0:ze.product)==="ReactNative")?Ee:N;function et(e){const t=I(e);return ee(()=>void(t.current=e),[e]),t}function Yt({set:e}){return ee(()=>(e(new Promise(()=>null)),()=>e(!1)),[e]),null}class tt extends Ve{constructor(...t){super(...t),this.state={error:!1}}componentDidCatch(t){this.props.set(t)}render(){return this.state.error?null:this.props.children}}tt.getDerivedStateFromError=()=>({error:!0});const nt="__default",De=new Map,Jt=e=>e&&!!e.memoized&&!!e.changes;function rt(e){var t;const n=typeof window<"u"?(t=window.devicePixelRatio)!=null?t:2:1;return Array.isArray(e)?Math.min(Math.max(e[0],n),e[1]):e}const Q=e=>{var t;return(t=e.__r3f)==null?void 0:t.root.getState()};function se(e){let t=e.__r3f.root;for(;t.getState().previousRoot;)t=t.getState().previousRoot;return t}const D={obj:e=>e===Object(e)&&!D.arr(e)&&typeof e!="function",fun:e=>typeof e=="function",str:e=>typeof e=="string",num:e=>typeof e=="number",boo:e=>typeof e=="boolean",und:e=>e===void 0,arr:e=>Array.isArray(e),equ(e,t,{arrays:n="shallow",objects:s="reference",strict:i=!0}={}){if(typeof e!=typeof t||!!e!=!!t)return!1;if(D.str(e)||D.num(e)||D.boo(e))return e===t;const h=D.obj(e);if(h&&s==="reference")return e===t;const m=D.arr(e);if(m&&n==="reference")return e===t;if((m||h)&&e===t)return!0;let c;for(c in e)if(!(c in t))return!1;if(h&&n==="shallow"&&s==="shallow"){for(c in i?t:e)if(!D.equ(e[c],t[c],{strict:i,objects:"reference"}))return!1}else for(c in i?t:e)if(e[c]!==t[c])return!1;if(D.und(c)){if(m&&e.length===0&&t.length===0||h&&Object.keys(e).length===0&&Object.keys(t).length===0)return!0;if(e!==t)return!1}return!0}};function Kt(e){e.dispose&&e.type!=="Scene"&&e.dispose();for(const t in e)t.dispose==null||t.dispose(),delete e[t]}function Y(e,t){const n=e;return n.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...t},e}function Se(e,t){let n=e;if(t.includes("-")){const s=t.split("-"),i=s.pop();return n=s.reduce((h,m)=>h[m],e),{target:n,key:i}}else return{target:n,key:t}}const Ae=/-\d+$/;function ve(e,t,n){if(D.str(n)){if(Ae.test(n)){const h=n.replace(Ae,""),{target:m,key:c}=Se(e,h);Array.isArray(m[c])||(m[c]=[])}const{target:s,key:i}=Se(e,n);t.__r3f.previousAttach=s[i],s[i]=t}else t.__r3f.previousAttach=n(e,t)}function Ie(e,t,n){var s,i;if(D.str(n)){const{target:h,key:m}=Se(e,n),c=t.__r3f.previousAttach;c===void 0?delete h[m]:h[m]=c}else(s=t.__r3f)==null||s.previousAttach==null||s.previousAttach(e,t);(i=t.__r3f)==null||delete i.previousAttach}function ot(e,{children:t,key:n,ref:s,...i},{children:h,key:m,ref:c,...f}={},v=!1){const r=e.__r3f,o=Object.entries(i),l=[];if(v){const d=Object.keys(f);for(let y=0;y<d.length;y++)i.hasOwnProperty(d[y])||o.unshift([d[y],nt+"remove"])}o.forEach(([d,y])=>{var _;if((_=e.__r3f)!=null&&_.primitive&&d==="object"||D.equ(y,f[d]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(d))return l.push([d,y,!0,[]]);let a=[];d.includes("-")&&(a=d.split("-")),l.push([d,y,!1,a]);for(const p in i){const g=i[p];p.startsWith(`${d}-`)&&l.push([p,g,!1,p.split("-")])}});const u={...i};return r!=null&&r.memoizedProps&&r!=null&&r.memoizedProps.args&&(u.args=r.memoizedProps.args),r!=null&&r.memoizedProps&&r!=null&&r.memoizedProps.attach&&(u.attach=r.memoizedProps.attach),{memoized:u,changes:l}}const Qt=typeof process<"u"&&!1;function he(e,t){var n;const s=e.__r3f,i=s==null?void 0:s.root,h=i==null||i.getState==null?void 0:i.getState(),{memoized:m,changes:c}=Jt(t)?t:ot(e,t),f=s==null?void 0:s.eventCount;e.__r3f&&(e.__r3f.memoizedProps=m);for(let l=0;l<c.length;l++){let[u,d,y,_]=c[l];if(pe(e)){const P="srgb",M="srgb-linear";u==="encoding"?(u="colorSpace",d=d===3001?P:M):u==="outputEncoding"&&(u="outputColorSpace",d=d===3001?P:M)}let a=e,p=a[u];if(_.length&&(p=_.reduce((g,P)=>g[P],e),!(p&&p.set))){const[g,...P]=_.reverse();a=P.reverse().reduce((M,O)=>M[O],e),u=g}if(d===nt+"remove")if(a.constructor){let g=De.get(a.constructor);g||(g=new a.constructor,De.set(a.constructor,g)),d=g[u]}else d=0;if(y&&s)d?s.handlers[u]=d:delete s.handlers[u],s.eventCount=Object.keys(s.handlers).length;else if(p&&p.set&&(p.copy||p instanceof ue)){if(Array.isArray(d))p.fromArray?p.fromArray(d):p.set(...d);else if(p.copy&&d&&d.constructor&&(Qt?p.constructor.name===d.constructor.name:p.constructor===d.constructor))p.copy(d);else if(d!==void 0){var v;const g=(v=p)==null?void 0:v.isColor;!g&&p.setScalar?p.setScalar(d):p instanceof ue&&d instanceof ue?p.mask=d.mask:p.set(d),!Qe()&&h&&!h.linear&&g&&p.convertSRGBToLinear()}}else{var r;if(a[u]=d,(r=a[u])!=null&&r.isTexture&&a[u].format===bt&&a[u].type===_t&&h){const g=a[u];pe(g)&&pe(h.gl)?g.colorSpace=h.gl.outputColorSpace:g.encoding=h.gl.outputEncoding}}J(e)}if(s&&s.parent&&e.raycast&&f!==s.eventCount){const l=se(e).getState().internal,u=l.interaction.indexOf(e);u>-1&&l.interaction.splice(u,1),s.eventCount&&l.interaction.push(e)}return!(c.length===1&&c[0][0]==="onUpdate")&&c.length&&(n=e.__r3f)!=null&&n.parent&&Pe(e),e}function J(e){var t,n;const s=(t=e.__r3f)==null||(n=t.root)==null||n.getState==null?void 0:n.getState();s&&s.internal.frames===0&&s.invalidate()}function Pe(e){e.onUpdate==null||e.onUpdate(e)}function Zt(e,t){e.manual||(Ze(e)?(e.left=t.width/-2,e.right=t.width/2,e.top=t.height/2,e.bottom=t.height/-2):e.aspect=t.width/t.height,e.updateProjectionMatrix(),e.updateMatrixWorld())}function ne(e){return(e.eventObject||e.object).uuid+"/"+e.index+e.instanceId}function en(){var e;const t=typeof self<"u"&&self||typeof window<"u"&&window;if(!t)return Ce;switch((e=t.event)==null?void 0:e.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return Bt;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return Ft;default:return Ce}}function it(e,t,n,s){const i=n.get(t);i&&(n.delete(t),n.size===0&&(e.delete(s),i.target.releasePointerCapture(s)))}function tn(e,t){const{internal:n}=e.getState();n.interaction=n.interaction.filter(s=>s!==t),n.initialHits=n.initialHits.filter(s=>s!==t),n.hovered.forEach((s,i)=>{(s.eventObject===t||s.object===t)&&n.hovered.delete(i)}),n.capturedMap.forEach((s,i)=>{it(n.capturedMap,t,s,i)})}function nn(e){function t(f){const{internal:v}=e.getState(),r=f.offsetX-v.initialClick[0],o=f.offsetY-v.initialClick[1];return Math.round(Math.sqrt(r*r+o*o))}function n(f){return f.filter(v=>["Move","Over","Enter","Out","Leave"].some(r=>{var o;return(o=v.__r3f)==null?void 0:o.handlers["onPointer"+r]}))}function s(f,v){const r=e.getState(),o=new Set,l=[],u=v?v(r.internal.interaction):r.internal.interaction;for(let a=0;a<u.length;a++){const p=Q(u[a]);p&&(p.raycaster.camera=void 0)}r.previousRoot||r.events.compute==null||r.events.compute(f,r);function d(a){const p=Q(a);if(!p||!p.events.enabled||p.raycaster.camera===null)return[];if(p.raycaster.camera===void 0){var g;p.events.compute==null||p.events.compute(f,p,(g=p.previousRoot)==null?void 0:g.getState()),p.raycaster.camera===void 0&&(p.raycaster.camera=null)}return p.raycaster.camera?p.raycaster.intersectObject(a,!0):[]}let y=u.flatMap(d).sort((a,p)=>{const g=Q(a.object),P=Q(p.object);return!g||!P?a.distance-p.distance:P.events.priority-g.events.priority||a.distance-p.distance}).filter(a=>{const p=ne(a);return o.has(p)?!1:(o.add(p),!0)});r.events.filter&&(y=r.events.filter(y,r));for(const a of y){let p=a.object;for(;p;){var _;(_=p.__r3f)!=null&&_.eventCount&&l.push({...a,eventObject:p}),p=p.parent}}if("pointerId"in f&&r.internal.capturedMap.has(f.pointerId))for(let a of r.internal.capturedMap.get(f.pointerId).values())o.has(ne(a.intersection))||l.push(a.intersection);return l}function i(f,v,r,o){const l=e.getState();if(f.length){const u={stopped:!1};for(const d of f){const y=Q(d.object)||l,{raycaster:_,pointer:a,camera:p,internal:g}=y,P=new oe(a.x,a.y,0).unproject(p),M=j=>{var C,x;return(C=(x=g.capturedMap.get(j))==null?void 0:x.has(d.eventObject))!=null?C:!1},O=j=>{const C={intersection:d,target:v.target};g.capturedMap.has(j)?g.capturedMap.get(j).set(d.eventObject,C):g.capturedMap.set(j,new Map([[d.eventObject,C]])),v.target.setPointerCapture(j)},R=j=>{const C=g.capturedMap.get(j);C&&it(g.capturedMap,d.eventObject,C,j)};let T={};for(let j in v){let C=v[j];typeof C!="function"&&(T[j]=C)}let k={...d,...T,pointer:a,intersections:f,stopped:u.stopped,delta:r,unprojectedPoint:P,ray:_.ray,camera:p,stopPropagation(){const j="pointerId"in v&&g.capturedMap.get(v.pointerId);if((!j||j.has(d.eventObject))&&(k.stopped=u.stopped=!0,g.hovered.size&&Array.from(g.hovered.values()).find(C=>C.eventObject===d.eventObject))){const C=f.slice(0,f.indexOf(d));h([...C,d])}},target:{hasPointerCapture:M,setPointerCapture:O,releasePointerCapture:R},currentTarget:{hasPointerCapture:M,setPointerCapture:O,releasePointerCapture:R},nativeEvent:v};if(o(k),u.stopped===!0)break}}return f}function h(f){const{internal:v}=e.getState();for(const r of v.hovered.values())if(!f.length||!f.find(o=>o.object===r.object&&o.index===r.index&&o.instanceId===r.instanceId)){const l=r.eventObject.__r3f,u=l==null?void 0:l.handlers;if(v.hovered.delete(ne(r)),l!=null&&l.eventCount){const d={...r,intersections:f};u.onPointerOut==null||u.onPointerOut(d),u.onPointerLeave==null||u.onPointerLeave(d)}}}function m(f,v){for(let r=0;r<v.length;r++){const o=v[r].__r3f;o==null||o.handlers.onPointerMissed==null||o.handlers.onPointerMissed(f)}}function c(f){switch(f){case"onPointerLeave":case"onPointerCancel":return()=>h([]);case"onLostPointerCapture":return v=>{const{internal:r}=e.getState();"pointerId"in v&&r.capturedMap.has(v.pointerId)&&requestAnimationFrame(()=>{r.capturedMap.has(v.pointerId)&&(r.capturedMap.delete(v.pointerId),h([]))})}}return function(r){const{onPointerMissed:o,internal:l}=e.getState();l.lastEvent.current=r;const u=f==="onPointerMove",d=f==="onClick"||f==="onContextMenu"||f==="onDoubleClick",_=s(r,u?n:void 0),a=d?t(r):0;f==="onPointerDown"&&(l.initialClick=[r.offsetX,r.offsetY],l.initialHits=_.map(g=>g.eventObject)),d&&!_.length&&a<=2&&(m(r,l.interaction),o&&o(r)),u&&h(_);function p(g){const P=g.eventObject,M=P.__r3f,O=M==null?void 0:M.handlers;if(M!=null&&M.eventCount)if(u){if(O.onPointerOver||O.onPointerEnter||O.onPointerOut||O.onPointerLeave){const R=ne(g),T=l.hovered.get(R);T?T.stopped&&g.stopPropagation():(l.hovered.set(R,g),O.onPointerOver==null||O.onPointerOver(g),O.onPointerEnter==null||O.onPointerEnter(g))}O.onPointerMove==null||O.onPointerMove(g)}else{const R=O[f];R?(!d||l.initialHits.includes(P))&&(m(r,l.interaction.filter(T=>!l.initialHits.includes(T))),R(g)):d&&l.initialHits.includes(P)&&m(r,l.interaction.filter(T=>!l.initialHits.includes(T)))}}i(_,r,a,p)}}return{handlePointer:c}}const st=e=>!!(e!=null&&e.render),at=Xe(null),rn=(e,t)=>{const n=Ut((c,f)=>{const v=new oe,r=new oe,o=new oe;function l(a=f().camera,p=r,g=f().size){const{width:P,height:M,top:O,left:R}=g,T=P/M;p.isVector3?o.copy(p):o.set(...p);const k=a.getWorldPosition(v).distanceTo(o);if(Ze(a))return{width:P/a.zoom,height:M/a.zoom,top:O,left:R,factor:1,distance:k,aspect:T};{const j=a.fov*Math.PI/180,C=2*Math.tan(j/2)*k,x=C*(P/M);return{width:x,height:C,top:O,left:R,factor:P/x,distance:k,aspect:T}}}let u;const d=a=>c(p=>({performance:{...p.performance,current:a}})),y=new xt;return{set:c,get:f,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:(a=1)=>e(f(),a),advance:(a,p)=>t(a,p,f()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new kt,pointer:y,mouse:y,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const a=f();u&&clearTimeout(u),a.performance.current!==a.performance.min&&d(a.performance.min),u=setTimeout(()=>d(f().performance.max),a.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:l},setEvents:a=>c(p=>({...p,events:{...p.events,...a}})),setSize:(a,p,g,P,M)=>{const O=f().camera,R={width:a,height:p,top:P||0,left:M||0,updateStyle:g};c(T=>({size:R,viewport:{...T.viewport,...l(O,r,R)}}))},setDpr:a=>c(p=>{const g=rt(a);return{viewport:{...p.viewport,dpr:g,initialDpr:p.viewport.initialDpr||g}}}),setFrameloop:(a="always")=>{const p=f().clock;p.stop(),p.elapsedTime=0,a!=="never"&&(p.start(),p.elapsedTime=0),c(()=>({frameloop:a}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:Lt(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(a,p,g)=>{const P=f().internal;return P.priority=P.priority+(p>0?1:0),P.subscribers.push({ref:a,priority:p,store:g}),P.subscribers=P.subscribers.sort((M,O)=>M.priority-O.priority),()=>{const M=f().internal;M!=null&&M.subscribers&&(M.priority=M.priority-(p>0?1:0),M.subscribers=M.subscribers.filter(O=>O.ref!==a))}}}}}),s=n.getState();let i=s.size,h=s.viewport.dpr,m=s.camera;return n.subscribe(()=>{const{camera:c,size:f,viewport:v,gl:r,set:o}=n.getState();if(f.width!==i.width||f.height!==i.height||v.dpr!==h){var l;i=f,h=v.dpr,Zt(c,f),r.setPixelRatio(v.dpr);const u=(l=f.updateStyle)!=null?l:typeof HTMLCanvasElement<"u"&&r.domElement instanceof HTMLCanvasElement;r.setSize(f.width,f.height,u)}c!==m&&(m=c,o(u=>({viewport:{...u.viewport,...u.viewport.getCurrentViewport(c)}})))}),n.subscribe(c=>e(c)),n};let re,on=new Set,sn=new Set,an=new Set;function me(e,t){if(e.size)for(const{callback:n}of e.values())n(t)}function Z(e,t){switch(e){case"before":return me(on,t);case"after":return me(sn,t);case"tail":return me(an,t)}}let ge,be;function _e(e,t,n){let s=t.clock.getDelta();for(t.frameloop==="never"&&typeof e=="number"&&(s=e-t.clock.elapsedTime,t.clock.oldTime=t.clock.elapsedTime,t.clock.elapsedTime=e),ge=t.internal.subscribers,re=0;re<ge.length;re++)be=ge[re],be.ref.current(be.store.getState(),s,n);return!t.internal.priority&&t.gl.render&&t.gl.render(t.scene,t.camera),t.internal.frames=Math.max(0,t.internal.frames-1),t.frameloop==="always"?1:t.internal.frames}function ln(e){let t=!1,n=!1,s,i,h;function m(v){i=requestAnimationFrame(m),t=!0,s=0,Z("before",v),n=!0;for(const o of e.values()){var r;h=o.store.getState(),h.internal.active&&(h.frameloop==="always"||h.internal.frames>0)&&!((r=h.gl.xr)!=null&&r.isPresenting)&&(s+=_e(v,h))}if(n=!1,Z("after",v),s===0)return Z("tail",v),t=!1,cancelAnimationFrame(i)}function c(v,r=1){var o;if(!v)return e.forEach(l=>c(l.store.getState(),r));(o=v.gl.xr)!=null&&o.isPresenting||!v.internal.active||v.frameloop==="never"||(r>1?v.internal.frames=Math.min(60,v.internal.frames+r):n?v.internal.frames=2:v.internal.frames=1,t||(t=!0,requestAnimationFrame(m)))}function f(v,r=!0,o,l){if(r&&Z("before",v),o)_e(v,o,l);else for(const u of e.values())_e(v,u.store.getState());r&&Z("after",v)}return{loop:m,invalidate:c,advance:f}}function lt(){const e=Me(at);if(!e)throw new Error("R3F: Hooks can only be used within the Canvas component!");return e}function Tn(e=n=>n,t){return lt()(e,t)}function xn(e,t=0){const n=lt(),s=n.getState().internal.subscribe,i=et(e);return ee(()=>s(i,t,n),[t,s,n]),null}const K=new Map,{invalidate:Be,advance:Fe}=ln(K),{reconciler:le,applyProps:V}=Vt(K,en),X={objects:"shallow",strict:!1},cn=(e,t)=>{const n=typeof e=="function"?e(t):e;return st(n)?n:new Mt({powerPreference:"high-performance",canvas:t,antialias:!0,alpha:!0,...e})};function un(e,t){const n=typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement;if(t){const{width:s,height:i,top:h,left:m,updateStyle:c=n}=t;return{width:s,height:i,top:h,left:m,updateStyle:c}}else if(typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement&&e.parentElement){const{width:s,height:i,top:h,left:m}=e.parentElement.getBoundingClientRect();return{width:s,height:i,top:h,left:m,updateStyle:n}}else if(typeof OffscreenCanvas<"u"&&e instanceof OffscreenCanvas)return{width:e.width,height:e.height,top:0,left:0,updateStyle:n};return{width:0,height:0,top:0,left:0}}function fn(e){const t=K.get(e),n=t==null?void 0:t.fiber,s=t==null?void 0:t.store;t&&console.warn("R3F.createRoot should only be called once!");const i=typeof reportError=="function"?reportError:console.error,h=s||rn(Be,Fe),m=n||le.createContainer(h,Ht,null,!1,null,"",i,null);t||K.set(e,{fiber:m,store:h});let c,f=!1,v;return{configure(r={}){let{gl:o,size:l,scene:u,events:d,onCreated:y,shadows:_=!1,linear:a=!1,flat:p=!1,legacy:g=!1,orthographic:P=!1,frameloop:M="always",dpr:O=[1,2],performance:R,raycaster:T,camera:k,onPointerMissed:j}=r,C=h.getState(),x=C.gl;C.gl||C.set({gl:x=cn(o,e)});let A=C.raycaster;A||C.set({raycaster:A=new wt});const{params:$,...q}=T||{};if(D.equ(q,A,X)||V(A,{...q}),D.equ($,A.params,X)||V(A,{params:{...A.params,...$}}),!C.camera||C.camera===v&&!D.equ(v,k,X)){v=k;const w=k instanceof Ot,E=w?k:P?new yt(0,0,0,0,.1,1e3):new Ct(75,0,.1,1e3);w||(E.position.z=5,k&&(V(E,k),("aspect"in k||"left"in k||"right"in k||"bottom"in k||"top"in k)&&(E.manual=!0,E.updateProjectionMatrix())),!C.camera&&!(k!=null&&k.rotation)&&E.lookAt(0,0,0)),C.set({camera:E}),A.camera=E}if(!C.scene){let w;u!=null&&u.isScene?w=u:(w=new St,u&&V(w,u)),C.set({scene:Y(w)})}if(!C.xr){var H;const w=(z,B)=>{const W=h.getState();W.frameloop!=="never"&&Fe(z,!0,W,B)},E=()=>{const z=h.getState();z.gl.xr.enabled=z.gl.xr.isPresenting,z.gl.xr.setAnimationLoop(z.gl.xr.isPresenting?w:null),z.gl.xr.isPresenting||Be(z)},L={connect(){const z=h.getState().gl;z.xr.addEventListener("sessionstart",E),z.xr.addEventListener("sessionend",E)},disconnect(){const z=h.getState().gl;z.xr.removeEventListener("sessionstart",E),z.xr.removeEventListener("sessionend",E)}};typeof((H=x.xr)==null?void 0:H.addEventListener)=="function"&&L.connect(),C.set({xr:L})}if(x.shadowMap){const w=x.shadowMap.enabled,E=x.shadowMap.type;if(x.shadowMap.enabled=!!_,D.boo(_))x.shadowMap.type=fe;else if(D.str(_)){var U;const L={basic:jt,percentage:Rt,soft:fe,variance:Tt};x.shadowMap.type=(U=L[_])!=null?U:fe}else D.obj(_)&&Object.assign(x.shadowMap,_);(w!==x.shadowMap.enabled||E!==x.shadowMap.type)&&(x.shadowMap.needsUpdate=!0)}const b=Qe();b&&("enabled"in b?b.enabled=!g:"legacyMode"in b&&(b.legacyMode=g)),f||V(x,{outputEncoding:a?3e3:3001,toneMapping:p?Pt:Et}),C.legacy!==g&&C.set(()=>({legacy:g})),C.linear!==a&&C.set(()=>({linear:a})),C.flat!==p&&C.set(()=>({flat:p})),o&&!D.fun(o)&&!st(o)&&!D.equ(o,x,X)&&V(x,o),d&&!C.events.handlers&&C.set({events:d(h)});const S=un(e,l);return D.equ(S,C.size,X)||C.setSize(S.width,S.height,S.updateStyle,S.top,S.left),O&&C.viewport.dpr!==rt(O)&&C.setDpr(O),C.frameloop!==M&&C.setFrameloop(M),C.onPointerMissed||C.set({onPointerMissed:j}),R&&!D.equ(R,C.performance,X)&&C.set(w=>({performance:{...w.performance,...R}})),c=y,f=!0,this},render(r){return f||this.configure(),le.updateContainer(F(dn,{store:h,children:r,onCreated:c,rootElement:e}),m,null,()=>{}),h},unmount(){ct(e)}}}function dn({store:e,children:t,onCreated:n,rootElement:s}){return ee(()=>{const i=e.getState();i.set(h=>({internal:{...h.internal,active:!0}})),n&&n(i),e.getState().events.connected||i.events.connect==null||i.events.connect(s)},[]),F(at.Provider,{value:e,children:t})}function ct(e,t){const n=K.get(e),s=n==null?void 0:n.fiber;if(s){const i=n==null?void 0:n.store.getState();i&&(i.internal.active=!1),le.updateContainer(null,s,null,()=>{i&&setTimeout(()=>{try{var h,m,c,f;i.events.disconnect==null||i.events.disconnect(),(h=i.gl)==null||(m=h.renderLists)==null||m.dispose==null||m.dispose(),(c=i.gl)==null||c.forceContextLoss==null||c.forceContextLoss(),(f=i.gl)!=null&&f.xr&&i.xr.disconnect(),Kt(i),K.delete(e),t&&t(e)}catch{}},500)})}}le.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:gt});const we={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function pn(e){const{handlePointer:t}=nn(e);return{priority:1,enabled:!0,compute(n,s,i){s.pointer.set(n.offsetX/s.size.width*2-1,-(n.offsetY/s.size.height)*2+1),s.raycaster.setFromCamera(s.pointer,s.camera)},connected:void 0,handlers:Object.keys(we).reduce((n,s)=>({...n,[s]:t(s)}),{}),update:()=>{var n;const{events:s,internal:i}=e.getState();(n=i.lastEvent)!=null&&n.current&&s.handlers&&s.handlers.onPointerMove(i.lastEvent.current)},connect:n=>{var s;const{set:i,events:h}=e.getState();h.disconnect==null||h.disconnect(),i(m=>({events:{...m.events,connected:n}})),Object.entries((s=h.handlers)!=null?s:[]).forEach(([m,c])=>{const[f,v]=we[m];n.addEventListener(f,c,{passive:v})})},disconnect:()=>{const{set:n,events:s}=e.getState();if(s.connected){var i;Object.entries((i=s.handlers)!=null?i:[]).forEach(([h,m])=>{if(s&&s.connected instanceof HTMLElement){const[c]=we[h];s.connected.removeEventListener(c,m)}}),n(h=>({events:{...h.events,connected:void 0}}))}}}}function He(e,t){let n;return(...s)=>{window.clearTimeout(n),n=window.setTimeout(()=>e(...s),t)}}function vn({debounce:e,scroll:t,polyfill:n,offsetSize:s}={debounce:0,scroll:!1,offsetSize:!1}){const i=n||(typeof window>"u"?class{}:window.ResizeObserver);if(!i)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[h,m]=ae({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),c=I({element:null,scrollContainers:null,resizeObserver:null,lastBounds:h,orientationHandler:null}),f=e?typeof e=="number"?e:e.scroll:null,v=e?typeof e=="number"?e:e.resize:null,r=I(!1);N(()=>(r.current=!0,()=>void(r.current=!1)));const[o,l,u]=ce(()=>{const a=()=>{if(!c.current.element)return;const{left:p,top:g,width:P,height:M,bottom:O,right:R,x:T,y:k}=c.current.element.getBoundingClientRect(),j={left:p,top:g,width:P,height:M,bottom:O,right:R,x:T,y:k};c.current.element instanceof HTMLElement&&s&&(j.height=c.current.element.offsetHeight,j.width=c.current.element.offsetWidth),Object.freeze(j),r.current&&!bn(c.current.lastBounds,j)&&m(c.current.lastBounds=j)};return[a,v?He(a,v):a,f?He(a,f):a]},[m,s,f,v]);function d(){c.current.scrollContainers&&(c.current.scrollContainers.forEach(a=>a.removeEventListener("scroll",u,!0)),c.current.scrollContainers=null),c.current.resizeObserver&&(c.current.resizeObserver.disconnect(),c.current.resizeObserver=null),c.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",c.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",c.current.orientationHandler))}function y(){c.current.element&&(c.current.resizeObserver=new i(u),c.current.resizeObserver.observe(c.current.element),t&&c.current.scrollContainers&&c.current.scrollContainers.forEach(a=>a.addEventListener("scroll",u,{capture:!0,passive:!0})),c.current.orientationHandler=()=>{u()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",c.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",c.current.orientationHandler))}const _=a=>{!a||a===c.current.element||(d(),c.current.element=a,c.current.scrollContainers=ut(a),y())};return mn(u,!!t),hn(l),N(()=>{d(),y()},[t,u,l]),N(()=>d,[]),[_,h,o]}function hn(e){N(()=>{const t=e;return window.addEventListener("resize",t),()=>void window.removeEventListener("resize",t)},[e])}function mn(e,t){N(()=>{if(t){const n=e;return window.addEventListener("scroll",n,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",n,!0)}},[e,t])}function ut(e){const t=[];if(!e||e===document.body)return t;const{overflow:n,overflowX:s,overflowY:i}=window.getComputedStyle(e);return[n,s,i].some(h=>h==="auto"||h==="scroll")&&t.push(e),[...t,...ut(e.parentElement)]}const gn=["x","y","top","bottom","left","right","width","height"],bn=(e,t)=>gn.every(n=>e[n]===t[n]);var _n=Object.defineProperty,wn=Object.defineProperties,yn=Object.getOwnPropertyDescriptors,Ne=Object.getOwnPropertySymbols,Cn=Object.prototype.hasOwnProperty,Sn=Object.prototype.propertyIsEnumerable,$e=(e,t,n)=>t in e?_n(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Ue=(e,t)=>{for(var n in t||(t={}))Cn.call(t,n)&&$e(e,n,t[n]);if(Ne)for(var n of Ne(t))Sn.call(t,n)&&$e(e,n,t[n]);return e},Pn=(e,t)=>wn(e,yn(t)),We,Ge;typeof window<"u"&&((We=window.document)!=null&&We.createElement||((Ge=window.navigator)==null?void 0:Ge.product)==="ReactNative")?Ee:N;function ft(e,t,n){if(!e)return;if(n(e)===!0)return e;let s=t?e.return:e.child;for(;s;){const i=ft(s,t,n);if(i)return i;s=t?null:s.sibling}}function dt(e){try{return Object.defineProperties(e,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return e}}const qe=console.error;console.error=function(){const e=[...arguments].join("");if(e!=null&&e.startsWith("Warning:")&&e.includes("useContext")){console.error=qe;return}return qe.apply(this,arguments)};const je=dt(Xe(null));class pt extends Ve{render(){return ie(je.Provider,{value:this._reactInternals},this.props.children)}}function En(){const e=Me(je);if(e===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const t=zt();return ce(()=>{for(const s of[e,e==null?void 0:e.alternate]){if(!s)continue;const i=ft(s,!1,h=>{let m=h.memoizedState;for(;m;){if(m.memoizedState===t)return!0;m=m.next}});if(i)return i}},[e,t])}function Mn(){const e=En(),[t]=ae(()=>new Map);t.clear();let n=e;for(;n;){if(n.type&&typeof n.type=="object"){const i=n.type._context===void 0&&n.type.Provider===n.type?n.type:n.type._context;i&&i!==je&&!t.has(i)&&t.set(i,Me(dt(i)))}n=n.return}return t}function On(){const e=Mn();return ce(()=>Array.from(e.keys()).reduce((t,n)=>s=>ie(t,null,ie(n.Provider,Pn(Ue({},s),{value:e.get(n)}))),t=>ie(pt,Ue({},t))),[e])}const jn=Ye(function({children:t,fallback:n,resize:s,style:i,gl:h,events:m=pn,eventSource:c,eventPrefix:f,shadows:v,linear:r,flat:o,legacy:l,orthographic:u,frameloop:d,dpr:y,performance:_,raycaster:a,camera:p,scene:g,onPointerMissed:P,onCreated:M,...O},R){ce(()=>qt(It),[]);const T=On(),[k,j]=vn({scroll:!0,debounce:{scroll:50,resize:0},...s}),C=I(null),x=I(null);Dt(R,()=>C.current);const A=et(P),[$,q]=ae(!1),[H,U]=ae(!1);if($)throw $;if(H)throw H;const b=I(null);return ee(()=>{const w=C.current;j.width>0&&j.height>0&&w&&(b.current||(b.current=fn(w)),b.current.configure({gl:h,events:m,shadows:v,linear:r,flat:o,legacy:l,orthographic:u,frameloop:d,dpr:y,performance:_,raycaster:a,camera:p,scene:g,size:j,onPointerMissed:(...E)=>A.current==null?void 0:A.current(...E),onCreated:E=>{E.events.connect==null||E.events.connect(c?Xt(c)?c.current:c:x.current),f&&E.setEvents({compute:(L,z)=>{const B=L[f+"X"],W=L[f+"Y"];z.pointer.set(B/z.size.width*2-1,-(W/z.size.height)*2+1),z.raycaster.setFromCamera(z.pointer,z.camera)}}),M==null||M(E)}}),b.current.render(F(T,{children:F(tt,{set:U,children:F(At,{fallback:F(Yt,{set:q}),children:t})})})))}),N(()=>{const w=C.current;if(w)return()=>ct(w)},[]),F("div",{ref:x,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:c?"none":"auto",...i},...O,children:F("div",{ref:k,style:{width:"100%",height:"100%"},children:F("canvas",{ref:C,style:{display:"block"},children:n})})})}),kn=Ye(function(t,n){return F(pt,{children:F(jn,{...t,ref:n})})});export{kn as C,xn as a,Tn as u};
